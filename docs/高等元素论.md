!> 原文来自 NGA 用户[Shallow夢](https://bbs.nga.cn/nuke.php?func=ucp&uid=62536688)的[[心得交流] [长文警告]《高等元素论》(正式版ver1.5)](https://bbs.nga.cn/read.php?&tid=24400590)  
（个人排版自用，有小部分修改，侵删）

## 前言

在经过两个多月的<ruby>沉<rt>mo</rt>淀<rt>yu</rt></ruby>后，本帖终于在 2021/2/1 更新辣~~(正式出版)~~ 。

本次更新，更正了之前错误的<span class="element electro reaction">感电</span>部分内容，将之前十分突兀的<span class="element electro reaction">感电</span>与叠加部分内容进行了优化，现在能够较为平滑地用同一逻辑来理解元素量体系下的各个分支，使整体更为简洁。

~~然而文笔和表达稀烂的问题没有任何改观~~

在修改和增加<span class="element electro reaction">感电</span>、<span class="element Swirl reaction">扩散</span>、<span class="element Frozen reaction">冻结</span>与三元素反应相关内容后，现理论与包含内容已趋于完善！![偷吃](https://img4.nga.178.com/ngabbs/post/smile/a2_30.png)。

又偷摸加点东西，复杂的莫深究，估计代码们自己也不太清楚！![囧](https://img4.nga.178.com/ngabbs/post/smile/a2_24.png)

---
<details><summary>关于元素「强弱」...</summary>

还是要强调一下，所谓元素的「强弱」是按照其可能拥有的最大元素量来区分的，并不代表其绝对具有某种性质。

举个例子 (表述很粗糙，意会意会)，1mol 的 HCl 和 1mol 的 H2SO4，如果和足量的 NaOH 反应，大家都知道是 H2SO4 消耗的 NaOH 更多，那如果不说各是多少 mol，自然就无法判断谁消耗的更多。

我们一般说的元素「强弱」就是类似的道理，是在等同量的前提下 (即都刚附着，或者说作为触发元素) 看谁的更多，而不是说有的情况只有强元素能反应而弱的不行。
</details>

---

想强调这点是因为我看到过一些玩家的评论，他们可能是认为「强弱」是指附着频率，或者是类似酸足够强才能和某些物质反应的性质

## 观前提示

本帖内容可能存在逻辑混乱，表述不清和言语啰嗦等问题，还请见谅![大哭](https://img4.nga.178.com/ngabbs/post/smile/a2_15.png)。

本帖内容建立于对大量测试数据分类归纳的基础上，是为了让大家对原神元素相关内容有更进一步的了解，进而为以后某些可能的套路玩法提供数据支撑。

内容不涉及相关伤害数据，只是对元素机制本身的分析，且不包含附着 CD 内容，本帖内容建立在「元素既定附着」的基础上。

请结合[元素附着时间](https://bbs.nga.cn/read.php?tid=23836189)、[元素反应中的元素残留](https://bbs.nga.cn/read.php?tid=23971940)与[元素附着时间叠加](https://bbs.nga.cn/read.php?tid=23893611)一同食用。

破盾 / 甲内容可参考[《普通破盾学》](https://bbs.nga.cn/read.php?tid=25127442)与[《普通破盾学》续](https://bbs.nga.cn/read.php?tid=25537580)

#### 前排鸣谢

感谢**【ZangYu233】大佬**在测试初期的大力支持。

感谢**某位不愿意透露姓名的腹黑亲友**对初版文章内容的意见与建议。

感谢**【小明明明中观察】大佬**指出感电内容的错误，并为简化理论提供了重要思路。

感谢**【吾竟南宫遥】大佬**、**【tesiacoil】大佬**和**【Forever丨圣洁】大佬**对更新内容相关思路和测试的帮助。

**明明**、**tesiacoil**、**南宫**和**圣洁**四位大佬都是**「提瓦特大学」**的一员，这里小小宣传一下

---
<details><summary>关于提瓦特大学...</summary>

这里引用「小明明」大佬的话：

提瓦特大学是一个经常互相交流的小群体而不是攻略组，帖子权利各归各自。

共用的「提瓦特大学」贴牌和 Logo，代表着群员之间的相互认可、而不代表帖子的权利归属。

提瓦特大学的其它贴牌帖亦同。

(附提瓦特大学 Logo)

<img src="https://img.nga.178.com/attachments/mon_202106/30/i2Q2o-8uxmZaT3cSsg-sg.jpg.medium.jpg" alt="img" style="zoom:50%;" />
</details>

---

破盾部分的骗骗花测试思路来自于**【roxbox】大佬**的评论

感谢曾在评论、私信和游戏中提出意见的各位，没有各位的帮助就没有今天的成果。

十分感谢大家的帮助与支持！![干杯](https://img4.nga.178.com/ngabbs/post/smile/a2_54.png)

## 一、元素量与附着时间

### 1.1 附着元素和触发元素
游戏中的元素可以大体分为两种情况：

1. 只存在一瞬的**触发元素**，即触发反应的元素 (包括反应破盾)。例如对一个附着<span class="element hydro">水</span>的目标上<span class="element pyro">火</span>会触发<span class="element Vaporize reaction">蒸发</span>反应，此时<span class="element pyro">火</span>元素便为**触发元素**
   
2. 会持续存在的**附着元素**，附着到目标身上可持续存在的元素即为**附着元素**


**文字理解：**对于角色对敌对单位施加的元素，其只有作为触发元素时才可能且一定拥有 100% 的最大元素量，附着元素最多只拥有约 80% 的最大元素量

图像理解请参考 [1.4](#_14-元素衰减) 中的内容，可理解为一分段函数。

>PS. 游戏中带有伤害的元素大多具有与角色对敌对单位施加元素相同的规律 (称为**伤害元素**)，即附着元素最多只具有约 80% 的最大元素量，**伤害元素**的最大元素量与最长附着时间符合公式关系。
>
>但对于角色自身附着 (例如芭芭拉的<span class="element hydro">水</span>环给角色上<span class="element hydro">水</span>) 和一些不带伤害的元素 (例如海<span class="element hydro">水</span>)，这些元素无论作为触发元素还是附着元素所可以拥有的最大元素量都为 100% 的最大元素量，且他们的最大元素量与最长附着时间之间无明显公式关系。
>
>这里暂不展开叙述其他情况，本帖以角色对敌对单位施加元素与触发反应为主。

### 1.2 元素量与消耗量

元素量为元素本身所具有的且确切存在于游戏中的一种数值，是量化元素的必要工具。同种元素的反复叠加附着不存在反应，为**附着元素**间的元素量叠加覆盖。

元素反应中，**触发元素**会消耗**附着元素**的元素量，我们称**附着元素**被消耗的元素量数值为反应消耗量，这一点对反应破盾的情况同样适用。

「强度」不同的元素所对应的最长持续时间与最大元素量不同，最大元素量为元素作为**触发元素**时所具有的元素量，最长附着时间为元素作为**附着元素**所能单独存在的最长时间，具体数据详见元素附着时间。

数据采用「$最长附着时间-最大元素量$」的格式表示，假设除<span class="element dendro">草</span>元素外**最弱的原生伤害元素**具有的**最大元素量**为 $1$ (下同)，那么有如下的对应关系：

$$
\begin{alignedat}{2}
弱元素：  &9.5&s-1 \\
强元素：  & 12&s-2 \\
超强元素：& 17&s-4
\end{alignedat}
$$

**特别说明**：

1. 游戏 1.3 更新后修改了<span class="element Swirl reaction">扩散</span>反应的机制，具体内容详见元素反应中的<span class="element Swirl reaction">扩散</span>反应部分。
   
2. 上述对于元素的分类仅针对**角色施加的原生元素**(** 原生元素**即最初始的元素本身，不考虑受例如反应影响后的情况)，游戏中的所有元素不只这三种分级 (例如<span class="element Swirl reaction">扩散</span>可以产生无数种不同初始状态的元素)

### 1.3 风和岩

实际上游戏中的<span class="element anemo">风</span>和<span class="element geo">岩</span>元素是被<span class="element pyro">火</span><span class="element electro">雷</span><span class="element cyro">冰</span><span class="element hydro">水</span>四元素克制的，而<span class="element anemo">风</span>和<span class="element geo">岩</span>暂不会发生反应。<span class="element anemo">风</span><span class="element geo">岩</span>较为特殊，角色施加的<span class="element anemo">风</span><span class="element geo">岩</span>元素无法附着，仅能作为触发元素，又因为被克制，通常只能发挥 $50\%$ 的元素量效果。
所以角色施加的<span class="element anemo">风</span><span class="element geo">岩</span>也符合上述元素强弱分类。

### 1.4 元素衰减

元素量会随附着时间的增加而衰减，附着衰减的情况仅会出现在**附着元素**上

图像理解附着元素和触发元素：

$1.\ x=0\ 时，y=b\\2.\ x>0\ 时，y=kx+0.8b\ (k<0,\ b>0)$

![img](https://img.nga.178.com/attachments/mon_202107/23/i2Q2o-eil1KcT1kSf0-85.png)

---

<details><summary>测试数据...</summary>
![img](https://img.nga.178.com/attachments/mon_202107/23/i2Q2o-g8cpKcT1kSf0-85.png)

![img](https://img.nga.178.com/attachments/mon_202107/23/i2Q2o-4ghgKbT1kSf0-85.png)

</details>

---

### 1.5 元素的主次

元素反应与叠加中的元素有主次之分，第一个附着的元素即为**主元素**，后续元素均为**次元素**。

在**同元素叠加**中，主次元素均为**附着元素**。**衰减速度**会以主元素的衰减速度衰减，次元素均仅负责补充元素量而不会改变**衰减速度**。


在**元素反应**中，主元素即为**附着元素**，次元素即为**触发元素**。只有主元素会残留，后续的次元素只消耗主元素元素量而不会残留。即便次元素的元素量多于主元素的剩余元素量，次元素也不会残留。(<span class="element electro reaction">感电</span>反应除外，会在元素反应中提到)

## 二、同元素叠加

### 叠加机制理论

当补充元素的元素量大于剩余元素的元素量时，该元素的元素量会更新为补充元素的元素量 (小于则不更新，即二者选其多)，但是更新元素量不会改变主元素的衰减速度。

**衰减速度**：元素原始状态衰减的速度。

> 例如，$9.5s$ 弱元素附着时最多具有约 $0.8$ 的元素量，那么其衰减速度为

$$
每秒衰减\ 0.8\div9.5=\dfrac 8 {95}\ 的元素量
$$

> 如果被一 $12s$ 元素补充，$12s$ 元素叠加补充的元素量为 $1.6$，那么叠加后的元素衰减完所需时间为 

$$
1.6\div(\frac 8 {95})=19s
$$

本条不再举例，可参考[元素附着时间叠加机制](https://bbs.nga.cn/read.php?tid=23893611)中的数据。

## 三、元素反应

### 3.1 元素反应机制理论

元素反应中**次元素**会消耗**主元素**的元素量，如果反应后主元素的剩余元素量不为 0 则会继续残留至消耗完毕。

主元素与次元素的元素量消耗之比，在两元素无克制关系时为 $1:1$。

但当两元素间存在克制关系时，元素消耗关系为，克制元素 : 被克制元素 = $1:2$。

> 例如
>
> <span class="element electro">雷</span><span class="element cyro">冰</span>间无克制关系，$1$ 点<span class="element electro">雷</span>会消耗 $1$ 点<span class="element cyro">冰</span> (冰足量)
>
> <span class="element hydro">水</span>克制<span class="element pyro">火</span>，那么 $1$ 点<span class="element hydro">水</span>可以消耗 $2$ 点<span class="element pyro">火</span> (火足量)
>
> (<span class="element electro reaction">感电</span>反应较为特殊)

还有一点需要注意，两元素反应消耗的比例关系在某些情况中存在特殊的机制性设定。

例如某些怪物的护盾的反应消耗并不满足无克制 $1:1$ 和克制 $1:2$ 的关系，也就是不存在一般意义上的克制关系而是单独设定，故我们不将其归为一般意义上的元素克制。

比如经常有玩家提到的「<span class="element cyro">冰</span>克<span class="element electro">雷</span>」来源于<span class="element cyro">冰</span>元素反应破愚人众雷锤前锋军的<span class="element electro">雷</span>护甲，而雷锤前锋军是上述提到的特殊设定之一，也就是说「<span class="element cyro">冰</span>克<span class="element electro">雷</span>」只存在于雷锤前锋军这一个单位而并不存在于其他的大多数情况中，所以一般来说我们不认为<span class="element electro">雷</span>被<span class="element cyro">冰</span>克制。

**元素克制**：目前游戏中一般意义上的元素克制关系有：

1. <span class="element hydro">水</span>$\xRightarrow{克}$<span class="element pyro">火</span>
2. <span class="element pyro">火</span>$\xRightarrow{克}$<span class="element cyro">冰</span>
3. <span class="element hydro">水</span><span class="element electro">雷</span><span class="element cyro">冰</span><span class="element pyro">火</span>$\xRightarrow{克}$<span class="element anemo">风</span><span class="element geo">岩</span>

### 3.2 增幅反应、剧变反应与结晶反应

结合上述理论与[元素反应中的元素残留机制](https://bbs.nga.cn/read.php?tid=23971940)中的数据简单举几个例子便于大家理解。

<span class="element Frozen reaction">冻结</span>与<span class="element Swirl reaction">扩散</span>反应在下面单独提到，并不是因为其不符合一般的反应规律，是因为他们还有其他的额外效果需要展开叙述。而<span class="element electro reaction">感电</span>是与常规反应不同才展开叙述。

---
<details><summary>例子...</summary>

**例 1. 超导反应中 $12+9.5$ 的反应**

此情况下，$12s$ 元素为主元素，$9.5s$ 元素为次元素，反应时 $9.5s$ 元素最多会消耗掉主元素 1 的元素量。为判断主元素的剩余元素量与 $1$ 的大小，需找到主元素衰减至 $1$ 时的时间点。

$$
\begin{alignedat}{3}
&令上述公式\qquad &y&=-0.1314x+1.5847=1 \\
&求得\qquad &x&≈4.45s \\
&实际测试数据为 && 4.5s-4.6s
\end{alignedat} \\
$$

所以此情况下，附着时间在约 $4.6s$ 前反应会残留主元素 (需要注意，在约 $0.9s$ 的反应结算时间内看不出残留)，$4.6s$ 后反应则不残留元素。

可认为反应消耗是令原图像向下平移对应消耗量的单位，从图像最右侧开始影响而不影响正在进行的左半端，所以残留情况下元素会残留至约 $4.6s$

**例 2. 融化反应中 $12+9.5$ 的反应**

$12s$ 元素为主元素，$9.5s$ 元素为次元素，由于<span class="element pyro">火</span>克<span class="element cyro">冰</span>，所以<span class="element cyro">冰</span>消耗<span class="element pyro">火</span>的元素量减半，<span class="element pyro">火</span>消耗<span class="element cyro">冰</span>的元素量翻倍。

所以此情况只有先<span class="element pyro">火</span>后<span class="element cyro">冰</span>才可能残留<span class="element pyro">火</span>元素，而<span class="element cyro">冰</span><span class="element pyro">火</span>顺序<span class="element cyro">冰</span>元素不会残留。$9.5s$ 的<span class="element cyro">冰</span>消耗 $12s$ <span class="element pyro">火</span>的消耗量为 $1$ 的一半，即 $0.5$。

$$
\begin{alignedat}{3}
&令\qquad & 0.5&=-0.1314x+1.5847 \\
&求得\qquad & x&≈8.25s \\
&实际测试数据为 && 8.3s-8.4s
\end{alignedat} \\
$$

**例 3. <span class="element Crystallize reaction">结晶</span>反应中 $9.5s$ 元素 + 弱<span class="element geo">岩</span>的反应**

弱<span class="element geo">岩</span>的元素量为 $1$，由于被克制而只消耗主元素 $0.5$ 的元素量

$9.5s$ 元素对应的衰减为 $y=-0.0796x+0.7633$

$$
\begin{alignedat}{3}
&所以令\qquad &0.5&=-0.0796x+0.7633 \\
&求得\qquad &x&≈3.31s \\
&实际测试数据为\ &&3.5s
\end{alignedat} \\
$$
</details>

---

### 3.3 感电反应

**感电反应结算机制**：两元素地位平等，在反应期间共存，均为附着元素，每次结算同时减掉两元素各 $0.4$ 的元素量，每进行一次结算造成一次<span class="element electro reaction">感电</span>伤害，直到有一元素被消耗完。

**需要注意**，两次结算之间有约 1s 的间隔，间隔期间依然会正常计算元素衰减。

**例如** A<span class="element hydro">水</span>触发 B<span class="element electro">雷</span><span class="element electro reaction">感电</span>，触发时 B 雷元素量还支持 $2$ 次反应 (即元素量大于 $0.4$)，但 $1s$ 后的元素量小于 $0.4$，这种情况也只会触发一次<span class="element electro reaction">感电</span>，因为 B 雷会在第一次结算和第二次结算间的 $1s$ 衰减完而无法继续反应。

> 似乎存在如果两元素附着时间相隔过近，会导致前一元素会被少消耗一轮但伤害正常触发的问题。
> 
> <span class="element electro reaction">感电</span>还存在有时消耗一轮元素量后不造成此轮<span class="element electro reaction">感电</span>伤害的问题，此问题通常发生在中间轮次。原因不明

---
<details><summary>例子...</summary>

**例 1. 9.5 + 9.5​ 的两种情况**

A. 当前一元素的元素量尚未衰减至 $0.4$ 时，两元素的元素量都支持结算两次，此时会跳两次<span class="element electro reaction">感电</span>伤害而两元素均不残留。

B. 当前一元素的元素量衰减至第二次结算前会低于 $0.4$ 时 (已附着时间在触发第一次<span class="element electro reaction">感电</span>时应小于约 $3.75s$)，前一元素只支持进行一次结算而只造成一次<span class="element electro reaction">感电</span>伤害。后一元素在一次结算后被消耗 $0.4$ 的元素量，故会残留约 $9.5\times(0.4/0.8)=4.75s$。

> 注意，后一元素应从刚开始附着时开始计算时间，而非反应结算后。

**例 2. 12 + 9.5​ 的三种情况**

A. $12s$ 元素的元素量未衰减至 $0.8$ 时，跳两次<span class="element electro reaction">感电</span>伤害，$12s$ 元素残留而 $9.5s$ 元素不残留，$12s$ 元素残留至约 $6s$。

B. $12s$ 元素的元素量衰减至低于 $0.8$ 但不低于 $0.4$ 时 (已附着时间在触发第一次<span class="element electro reaction">感电</span>时应小于约 $8s$)，会跳两次<span class="element electro reaction">感电</span>伤害而两元素均不残留。

C. $12s$ 元素的元素量衰减至低于 $0.4$ 时，会跳一次<span class="element electro reaction">感电</span>伤害而 $9.5s$ 元素残留，会残留约 $4.75s$。
</details>

---

### 3.4 冻结与碎冰反应

**详细的<span class="element Frozen reaction">冻结</span>相关内容请移步[冻结相关的深入测试与一些猜测](https://bbs.nga.cn/read.php?tid=25681266&page=1)**

#### 3.4.1 简单介绍

首先要明确一点，与<span class="element cyro">冰</span>有关的元素有两种。一种是常见的<span class="element cyro">冰</span> (自由冰)，是无法<span class="element reaction">碎冰</span>的；另一种是<span class="element Frozen reaction">冻结</span>状态的<span class="element cyro">冰</span> (冻结冰)，是可以<span class="element reaction">碎冰</span>的，这点对怪物的<span class="element cyro">冰</span>盾也是一样。

这两种状态的<span class="element cyro">冰</span>图标不同，但两者的性质基本相同，例如冻元素也克制<span class="element anemo">风</span><span class="element geo">岩</span>，也被<span class="element pyro">火</span>克制。

一般<span class="element Frozen reaction">冻结</span>时会优先显示冻结冰，但这不意味着如果之前附着且残留的<span class="element cyro">冰</span>或<span class="element hydro">水</span>就不存在了，因为<span class="element hydro">水</span><span class="element cyro">冰</span>不会与冻元素反应，所以只要它们的元素量未衰减至 0 就仍会存在于目标身上，只不过不显示。同样，在<span class="element Frozen reaction">冻结</span>时也可以正常为目标附着新的<span class="element hydro">水</span><span class="element cyro">冰</span>元素。

> <span class="element Frozen reaction">冻结</span>反应消耗量指本次<span class="element Frozen reaction">冻结</span>中参与反应的元素量，即取决于<span class="element hydro">水</span><span class="element cyro">冰</span>二元素中量较少的那一方。

#### 3.4.2 冻结时间

![img](https://img.nga.178.com/attachments/mon_202102/25/i2Q9554-kv6lKjT3cSm6-ck.png)

#### 3.4.3 几个猜测的简单总结 

1. 冻元素量 $≈$ $2$ 倍的<span class="element Frozen reaction">冻结</span>反应消耗量。
2. 在前一次<span class="element Frozen reaction">冻结</span>尚未或刚结束时，紧接着施加的下一次<span class="element Frozen reaction">冻结</span>的冻结时间会减少约 $30\%$，此效果会在解冻后 $2s$ 内逐渐减少直至消失。
3. 冻元素的叠加应也符合上述叠加规律。

#### 3.4.4 碎冰阈值

当前版本内，<span class="element reaction">碎冰</span>反应存在最低**碎冰阈值**，当冻元素量小于约 0.5-0.6 时便无法触发<span class="element reaction">碎冰</span>反应，只会扣除冻元素量而无动画与伤害。

### 3.5 扩散反应

#### 3.5.1 几个用词

**扩散元素**：指<span class="element Swirl reaction">扩散</span>出去的元素

**被扩散元素**：指被<span class="element anemo">风</span>元素触发<span class="element Swirl reaction">扩散</span>反应的元素。

**盈额**：指发生<span class="element Swirl reaction">扩散</span>反应，附着元素剩余元素量大于等于<span class="element anemo">风</span>元素消耗量时，<span class="element Swirl reaction">扩散</span>元素具有的元素量

**亏额**：指发生<span class="element Swirl reaction">扩散</span>反应，附着元素剩余元素量小于<span class="element anemo">风</span>元素消耗量，<span class="element Swirl reaction">扩散</span>元素具有的元素量

(别问为什么用「盈亏」，问就中二)

#### 3.5.2 扩散机制

当附着元素剩余元素量大于等于<span class="element anemo">风</span>元素最大消耗量时，<span class="element Swirl reaction">扩散</span>元素具有**盈额**的元素量，弱<span class="element anemo">风</span>盈额约为 $2.2$，中<span class="element anemo">风</span>盈额约为 $3.45$；

当附着元素剩余元素量小于<span class="element anemo">风</span>元素最大消耗量时，<span class="element Swirl reaction">扩散</span>元素具有**亏额**的元素量，亏额与反应时附着元素剩余的元素量呈线性相关，与<span class="element anemo">风</span>元素强弱无关，且亏额最小值为约 $1.0$。

#### 3.5.3 盈亏图像

图像中的<span class="element Swirl reaction">扩散</span>元素元素量为作为**触发元素**的元素量，即最大值。理论公式为 $1.25x+0.95$
![img](https://img.nga.178.com/attachments/mon_202102/07/i2Q16p-ead2KtT3cSn2-ci.png)

#### 3.5.4 盈亏的关系 

假定上图亏额对应直线为 $\mathit{f}\ (x)$，

不难发现对于弱<span class="element anemo">风</span>来说 (具有 $1$ 元素量，<span class="element Swirl reaction">扩散</span>反应时最多消耗 $0.5$)，

盈额为 $\mathit{f}\ (1)$，盈亏分界点为 $(0.5,\ \mathit{f}\ (0.5))$，亏额为 $\mathit{f}\ (a)$ (其中 $a$ 代表附着元素剩余的元素量)。

对于中<span class="element anemo">风</span>来说 (具有 $2$ 元素量，<span class="element Swirl reaction">扩散</span>反应时最多消耗 $1$)，

盈额为 $\mathit{f}\ (2)$，盈亏分界点为 $(1,\ \mathit{f}\ (1))$，亏额为 $\mathit{f}\ (a)$。

换句话说可以将<span class="element Swirl reaction">扩散</span>元素的元素量归纳为一个总结:

1. 盈额时，$\mathit{f}\ (x)$ 的 $x$ 取<span class="element anemo">风</span>元素的元素量

2. 亏额时，$\mathit{f}\ (x)$ 的 $x$ 取被<span class="element Swirl reaction">扩散</span>元素的剩余元素量

## 四、复杂元素反应

### 4.1 简单介绍

当前版本中存在部分复杂的元素反应，如元素共存的情况和<span class="element anemo">风</span>同时<span class="element Swirl reaction">扩散</span>的情况。

本条主要介绍<span class="element electro reaction">感电</span>和<span class="element Frozen reaction">冻结</span>中的共存以及<span class="element anemo">风</span>的同时<span class="element Swirl reaction">扩散</span>这三个情况，并顺带提及<span class="element anemo">风</span>元素转化的优先级问题。

### 4.2 冻结中的三元素反应

<span class="element Frozen reaction">冻结</span>状态下单位仍可被附着有<span class="element hydro">水</span><span class="element cyro">冰</span>元素 (反应残留或反应后新的附着)，称这种元素为**藏元素**，同时称<span class="element Frozen reaction">冻结</span>元素为**冻元素**。

当藏元素与冻元素同时存在时，与其余几种元素发生反应存在以下几条规律。

### 4.2.1 反应规律

**规律一**：碎<span class="element cyro">冰</span>反应优先于其他反应

**规律二**：<span class="element anemo">风</span>优先反应藏元素

**规律三**：<span class="element pyro">火</span>和<span class="element electro">雷</span>优先反应藏<span class="element cyro">冰</span>元素其次是冻元素

**规律四**：先反应藏元素的情况，不足的量会由冻元素补充反应。先反应冻元素的情况，不足的量不会由藏元素补充反应。

(<span class="element geo">岩</span>元素会优先碎<span class="element cyro">冰</span>后<span class="element Crystallize reaction">结晶</span>藏元素，<span class="element hydro">水</span><span class="element cyro">冰</span>仍可补充<span class="element Frozen reaction">冻结</span>，这两种情况单一，不再单独纳入规律中)

---

<details><summary>规律解读 ...</summary>

**规律一：**游戏中部分攻击方式可碎<span class="element cyro">冰</span>的同时带有元素。

例如迪卢克的 e。此情况下的攻击会先判定碎<span class="element cyro">冰</span>，之后再判定其他元素的情况。例如迪卢克 e 攻击一带有藏<span class="element hydro">水</span>元素的<span class="element Frozen reaction">冻结</span>单位，会触发碎<span class="element cyro">冰</span> + <span class="element Vaporize reaction">蒸发</span>。

**规律二：**<span class="element Swirl reaction">扩散</span>会优先消耗藏元素，详细内容在规律四解读。

**规律三：**<span class="element pyro">火</span>和<span class="element electro">雷</span>会优先判定发生融化 / 超导反应，并且优先级藏<span class="element cyro">冰</span> > 冻元素。

例如对藏<span class="element hydro">水</span>的<span class="element Frozen reaction">冻结</span>单位用<span class="element electro">雷</span>，会和冻元素触发超导，而不触发<span class="element electro reaction">感电</span>。

再比如，对藏<span class="element cyro">冰</span>元素的<span class="element Frozen reaction">冻结</span>单位用<span class="element pyro">火</span>，会先消耗藏<span class="element cyro">冰</span>，不足的部分用冻元素补足，而造成只触发一次融化但消耗两部分元素的效果。

**规律四：**

例 1. 用元素量为 1 的<span class="element pyro">火</span>打有藏<span class="element cyro">冰</span>的<span class="element Frozen reaction">冻结</span>单位，其中藏<span class="element cyro">冰</span>元素量为 0.4，冻元素量足量，根据规律三<span class="element pyro">火</span>会优先和藏<span class="element cyro">冰</span>反应，因为<span class="element pyro">火</span>克<span class="element cyro">冰</span>，消耗 0.4 藏<span class="element cyro">冰</span>只需 0.2 <span class="element pyro">火</span>元素，剩余的 0.8 <span class="element pyro">火</span>元素则会与冻元素反应。

例 2. 用元素量为 1 的<span class="element anemo">风</span><span class="element Swirl reaction">扩散</span>有藏<span class="element hydro">水</span>的<span class="element Frozen reaction">冻结</span>单位，其中藏<span class="element hydro">水</span>元素量为 0.3，冻元素足量，根据规律二<span class="element anemo">风</span>会先和藏元素反应，由于<span class="element anemo">风</span>被<span class="element cyro">冰</span><span class="element hydro">水</span>克制，消耗 0.3 的藏<span class="element hydro">水</span>需 0.6 的<span class="element anemo">风</span>元素量，剩下的 0.4 <span class="element anemo">风</span>元素量会再消耗 0.2 的冻元素。

例 3. 用元素量为 2 的<span class="element electro">雷</span>打有藏<span class="element hydro">水</span>的<span class="element Frozen reaction">冻结</span>单位，其中冻元素量为 1，藏<span class="element hydro">水</span>元素量无所谓，根据规律三类优先与冻元素反应，消耗完冻元素后单位解冻，尽管还剩余 1 的<span class="element electro">雷</span>元素，也不会与藏<span class="element hydro">水</span>反应。
</details>

---

#### 4.2.2 补充 

1. 按照上述规律，单次的<span class="element electro">雷</span><span class="element pyro">火</span>附着是不可能在不碎<span class="element cyro">冰</span>的前提下，对<span class="element Frozen reaction">冻结</span>藏<span class="element hydro">水</span>单位触发<span class="element electro reaction">感电</span>或<span class="element Vaporize reaction">蒸发</span>的。

2. 如果<span class="element anemo">风</span>元素<span class="element Swirl reaction">扩散</span>时藏元素量不足而消耗了一些冻元素，如藏元素为<span class="element hydro">水</span>，则本次<span class="element Swirl reaction">扩散</span>会触发两次，一次为藏元素的<span class="element hydro">水</span>扩散，一次为冻元素的<span class="element cyro">冰</span>扩散，对被扩散单位造成一<span class="element cyro">冰</span>一<span class="element hydro">水</span>两次<span class="element Swirl reaction">扩散</span>伤害，而对其他被<span class="element Swirl reaction">扩散</span>波及的单位造成<span class="element cyro">冰</span><span class="element hydro">水</span>附着但只有一次<span class="element cyro">冰</span>伤害 (因为扩散的水无伤害)。

  如藏元素为<span class="element cyro">冰</span>元素，则只有一次<span class="element cyro">冰</span>扩散，因为冰和冻元素被<span class="element Swirl reaction">扩散</span>触发的都是<span class="element cyro">冰</span>扩散，所以视作两者同源。

### 4.3 感电中的三元素反应

#### 4.3.1 反应规律

<span class="element electro reaction">感电</span>反应结算中共存的<span class="element electro">雷</span><span class="element hydro">水</span>与其他可反应元素反应时，会先消耗<span class="element electro">雷</span>元素量 (与<span class="element electro">雷</span><span class="element hydro">水</span>附着先后顺序无关)，如果<span class="element electro">雷</span>元素量不够反应完所有触发元素的量时，则触发元素剩余的量会消耗<span class="element hydro">水</span>元素进而触发下一次反应。(与上述<span class="element Frozen reaction">冻结</span>中的规律四前半相似)

---
<details><summary>三个例子 ...</summary>
例 1. 用元素量为 $1$ 的火打共存的雷水，反应时<span class="element electro">雷</span>元素量为 $1.2$，<span class="element hydro">水</span>元素量为 $1$，

由于<span class="element electro">雷</span>元素量$>$<span class="element pyro">火</span>元素量且<span class="element electro">雷</span><span class="element pyro">火</span>无克制关系，故<span class="element pyro">火</span>只会消耗<span class="element electro">雷</span>元素 $1$ 的元素量触发超载而不会触发<span class="element Vaporize reaction">蒸发</span>。

例 2. 用元素量为 $1$ 的火打共存的雷水，反应时<span class="element electro">雷</span>元素量为 $0.8$，<span class="element hydro">水</span>元素量为 $1$，

由于<span class="element electro">雷</span>元素量$<$<span class="element pyro">火</span>元素量且<span class="element electro">雷</span><span class="element pyro">火</span>无克制关系，故<span class="element pyro">火</span>在消耗 $0.8$ <span class="element electro">雷</span>元素后仍剩 $0.2$ 元素量，又由于<span class="element pyro">火</span>被<span class="element hydro">水</span>克制，所以会消耗<span class="element hydro">水</span>元素 $0.1$ 的元素量，最终触发超载与<span class="element Vaporize reaction">蒸发</span>。

例 3. 用元素量为 $2$ 的冰打共存的雷水，反应时<span class="element electro">雷</span>元素量为 $0.8$，<span class="element hydro">水</span>元素量为 $1$，

由于<span class="element electro">雷</span>元素量$<$<span class="element cyro">冰</span>元素量且<span class="element electro">雷</span><span class="element cyro">冰</span>无克制关系，故<span class="element cyro">冰</span>在消耗 $0.8$ <span class="element electro">雷</span>元素后仍剩 $1.2$ 的元素量与<span class="element hydro">水</span>反应，最终触发超导与<span class="element Frozen reaction">冻结</span>
</details>

---

#### 4.3.2 补充 

1. 如果<span class="element anemo">风</span>元素<span class="element Swirl reaction">扩散</span>时<span class="element electro">雷</span>元素量不足而消耗了一些<span class="element hydro">水</span>元素，则本次<span class="element Swirl reaction">扩散</span>会触发两次伤害，一次为<span class="element electro">雷</span>元素的<span class="element Swirl reaction">扩散</span>伤害，一次为<span class="element hydro">水</span>元素的<span class="element Swirl reaction">扩散</span>伤害。
2. <span class="element pyro">火</span>同时触发超载与<span class="element Vaporize reaction">蒸发</span>的情况，会正常造成超载的伤害，且<span class="element pyro">火</span>自身的伤害也会按<span class="element Vaporize reaction">蒸发</span>倍率提升。只触发超载的情况也正常造成伤害。
3. <span class="element cyro">冰</span>同时触发超导与<span class="element Frozen reaction">冻结</span>的情况，尽管触发超导但不会造成超导伤害，<span class="element Frozen reaction">冻结</span>仍可正常进行。只触发超导的情况则可以正常造成超导伤害。
4. <span class="element geo">岩</span>元素<span class="element Crystallize reaction">结晶</span>时，无论<span class="element electro">雷</span>元素量是否足够，都只会产生一个<span class="element electro">雷</span>晶片而无<span class="element hydro">水</span>晶片。

### 4.4 风的同时扩散与元素转化优先级

#### 4.4.1 什么是同时扩散

当一个单位存在元素共存的情况或多个单位各附着有元素，此时对该单位或同时对多个附着有元素的单位用<span class="element anemo">风</span>触发<span class="element Swirl reaction">扩散</span>反应，<span class="element Swirl reaction">扩散</span>元素的附着将出现无序的情况，即系统无法判断这些<span class="element Swirl reaction">扩散</span>元素附着的先后顺序只能算作同时附着。

这种情况下，会出现无法正常进行元素结算的问题，例如<span class="element electro reaction">感电</span>反应不会开始和增幅反应无倍率提升。

#### 4.4.2 同时扩散的同元素叠加

目前经过粗略测试，同时<span class="element Swirl reaction">扩散</span>的同元素叠加似乎不会进行叠加判定，而是单独选取较少的<span class="element Swirl reaction">扩散</span>元素进行附着，衰减速率也是单纯沿用所选取附着的<span class="element Swirl reaction">扩散</span>元素的衰减速率。

#### 4.4.3 同时扩散的简单反应

这里最简单的情况指，两个可反应元素被同时<span class="element Swirl reaction">扩散</span>附着到第三个未先附着有元素的单位上发生的单次反应。

由于同时附着，两元素无法区分先后，所以两元素均有残留的可能，两者均按附着元素量计算，多者残留。

但同时也存在上述所提到的异常情况，如<span class="element pyro">火</span><span class="element hydro">水</span>、<span class="element pyro">火</span><span class="element cyro">冰</span>同时附着，该次增幅反应无论哪个元素伤害都不会有增幅倍率的提升；

如<span class="element electro">雷</span><span class="element hydro">水</span>同时附着，则<span class="element electro reaction">感电</span>反应不会触发，<span class="element hydro">水</span><span class="element electro">雷</span>两元素会一直保持共存附着状态。而<span class="element Frozen reaction">冻结</span>、超载等反应可正常触发。

#### 4.4.4 同时扩散的复杂情况

至于其他更加复杂的情况，如三种元素进行同时附着，亦或是两种元素同时附着且被附着单位先前挂有其他元素，这类复杂情况暂未进行深入测试，测试难度过大且实用性不高。

复杂情况中仅针对特定情况做了一小部分粗略的测试，对此有一点非常不负责的粗略总结

---

<details><summary>不负责的总结 ...</summary>

如果两元素同时附着到已挂有某一元素的单位上发生反应的话，我们称先挂有元素的单位为**主体**，那么

1. 主体为<span class="element pyro">火</span>，反应顺序为<span class="element cyro">冰</span>，<span class="element hydro">水</span>

2. 主体为<span class="element hydro">水</span>，反应顺序为<span class="element pyro">火</span>，<span class="element cyro">冰</span>
3. 主体为<span class="element cyro">冰</span>，反应顺序为<span class="element pyro">火</span>，<span class="element hydro">水</span>

未进行<span class="element electro">雷</span>相关测试，通过上述不靠谱结论进行外推，元素优先与克制的元素结算，其次是被克制的元素，最后是无克制关系的元素。

鉴于元素转化存在<span class="element pyro">火</span> > <span class="element hydro">水</span> > <span class="element electro">雷</span> > <span class="element cyro">冰</span>的关系，推测无克制关系的元素也可能按照该顺序依次结算反应。只是猜测，仅供参考。
</details>

---

这里特别感谢**【tesiacoil】大佬**的帮助

#### 4.4.5 风元素转化优先级

某些<span class="element anemo">风</span>元素技能可以沾染其他元素进行元素转化，当转化判定同时存在多种元素时，元素的转化按照特定优先级进行判定，优先转化为高优先级的元素。

旅行者 (风) 的元素转化优先级为：<span class="element cyro">冰</span> (冻)> <span class="element pyro">火</span> > <span class="element hydro">水</span> > <span class="element electro">雷</span>

其他<span class="element anemo">风</span>元素角色的元素转化优先级为：<span class="element pyro">火</span> > <span class="element hydro">水</span> > <span class="element electro">雷</span> > <span class="element cyro">冰</span> (冻)



## 五、一些补充

### 5.1 破盾 / 甲

原神内针对例如法师无敌盾和愚人众减伤甲，破盾值采取的是**元素量消耗 + 伤害 + 破<span class="element cyro">冰</span><span class="element geo">岩</span>额外元素消耗**的综合计算，消耗量会受单独设置系数与元素相克影响。

减伤甲免疫所有伤害只按元素消耗量进行，所以下述测试在避免破<span class="element cyro">冰</span>影响下对骗骗花的<span class="element cyro">冰</span>甲进行。

### 5.2 如何得到衰减图像

在已知上面部分内容的前提下，选取冰骗骗花为测试对象，提前测试出 $9.5s$ <span class="element electro">雷</span>元素一下破其一半的<span class="element cyro">冰</span>甲，$12s$ <span class="element electro">雷</span>元素一下破完，即 $12s$ <span class="element electro">雷</span>元素的破甲值为 $9.5s$ <span class="element electro">雷</span>元素的两倍。

正式测试中，在骗骗花给自己套上<span class="element cyro">冰</span>甲之前提前附着<span class="element electro">雷</span>元素，此时与<span class="element cyro">冰</span>甲反应的是已经过衰减的元素。

不难发现破甲值按一定规律随附着时间增加而减少。通过衰减破甲与满额破甲的比值算出衰减后对应的元素量，最终得出上面的图像。

## 六、结语

相关测试内容从最开始测试的附着时间到初版发布共耗时两个月，文件夹塞了 25G 的测试数据。再到现在又过了几个月，共计测试文件 31.2G。

不过现在的内容仍说不上特别完整，期待未来有进一步的完善，也希望这些东西能对大家有一定的帮助。(偷摸更点文字表达，没人发现吧)

望大家理性讨论相关问题，共建良好游戏环境。如若发现文中有错误，还望各位能评论提出，让我们一同进步。

万分感谢！

---
<details><summary>Secret ...</summary>

$$
持续时间 = 7+2.5 \times 元素量 \\
衰减速度≈\dfrac {0.8 \cdot 元素量} {7+2.5 \cdot 元素量}
$$
</details>

---


https://bbs.nga.cn/read.php?&tid=24400590

